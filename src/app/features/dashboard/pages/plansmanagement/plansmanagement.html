<div class="container">
  <!-- Header -->
  <div class="header d-flex justify-content-between align-items-center mb-3">
    <h2 class="title">{{ t('plansManagement') }}</h2>
    <div class="actions d-flex gap-2">
      <button class="btn-text" (click)="updateSelectedPlans()">
  <i class="fa-regular fa-pen-to-square"></i> {{ t('update') }}
</button>

<button class="btn-text" (click)="deleteSelectedPlans()">
  <i class="fa-regular fa-trash-can"></i> {{ t('delete') }}
</button>

      <button class="btn btn-primary btn-sm d-flex align-items-center gap-1" (click)="addNewPlan()">
        {{ t('addNewPlan') }}
      </button>
    </div>
  </div>
<!-- Table Section -->
<div class="table-responsive">
  <table class="custom-table table align-middle">
    <thead>
      <tr>
        <th style="width: 40px;">
          <div class="checkbox-icon indeterminate" (click)="toggleAll()"></div>
        </th>
        <th>{{ t('planName') }}</th>
        <th>{{ t('planDescription') }}</th>
        <th>{{ t('subscriptionDuration') }}</th>
        <th>{{ t('paidFees') }}</th>
        <th>{{ t('branchesLimit') }}</th>
        <th>{{ t('clientsLimit') }}</th>
        <th>{{ t('usersLimit') }}</th>
        <!-- <th>Actions</th> -->
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let plan of plans" [class.selected-row]="plan.selected">
        <td>
          <div class="checkbox-icon" [class.checked]="plan.selected" (click)="toggleSelection(plan)"></div>
        </td>
        <td>{{ plan.name }}</td>
        <td>{{ plan.description }}</td>
        <td>{{ plan.durationMonths }}</td>
        <td>{{ plan.paidFees }}</td>
        <td>{{ plan.branchesLimit }}</td>
        <td>{{ plan.clientsLimit }}</td>
        <td>{{ plan.usersLimit }}</td>
        <!-- <td>
          <button class="btn btn-sm btn-warning" (click)="openEditForm(plan)">
            {{ t('update') }}
          </button>
        </td> -->
      </tr>
    </tbody>
  </table>
</div>

<!-- Overlay Form -->
<div *ngIf="showForm" class="plan-form-overlay">
  <div class="plan-form">
    <h4>{{ editingPlan.id ? t('editPlan') : t('addNewPlan') }}</h4>
    <form (ngSubmit)="savePlan()" #planForm="ngForm">
      <input type="text" [(ngModel)]="editingPlan.name" name="name" required placeholder="{{ t('planName') }}" class="form-control mb-2">
      <textarea [(ngModel)]="editingPlan.description" name="description" placeholder="{{ t('planDescription') }}" class="form-control mb-2"></textarea>
      <input type="number" [(ngModel)]="editingPlan.durationMonths" name="durationMonths" required placeholder="{{ t('subscriptionDuration') }}" class="form-control mb-2">
      <input type="number" [(ngModel)]="editingPlan.paidFees" name="paidFees" required placeholder="{{ t('paidFees') }}" class="form-control mb-2">
      <input type="number" [(ngModel)]="editingPlan.branchesLimit" name="branchesLimit" placeholder="{{ t('branchesLimit') }}" class="form-control mb-2">
      <input type="number" [(ngModel)]="editingPlan.clientsLimit" name="clientsLimit" placeholder="{{ t('clientsLimit') }}" class="form-control mb-2">
      <input type="number" [(ngModel)]="editingPlan.usersLimit" name="usersLimit" placeholder="{{ t('usersLimit') }}" class="form-control mb-2">

      <div class="d-flex gap-2 mt-3">
        <button type="submit" class="btn btn-primary">{{ editingPlan.id ? t('update') : t('addNewPlan') }}</button>
        <button type="button" class="btn btn-secondary" (click)="cancelForm()">{{ t('cancel') }}</button>
      </div>
    </form>
  </div>
</div>

