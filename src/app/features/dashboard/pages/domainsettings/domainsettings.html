<div class="domain-container">

  <!-- Header Section -->
  <div class="page-header">
    <div class="header-text">
      <h2>{{ t('domainSettingsTitle') }}</h2>
      <p>{{ t('domainSettingsSubtitle') }}</p>
    </div>
    <button class="btn-primary" (click)="openModal()">
      <span class="plus-icon">+</span> {{ t('addCountry') }}
    </button>
  </div>

  <div class="layout-content">

    <!-- Sidebar -->
    <div class="sidebar">
      <ul>
<li *ngFor="let country of countries"
    [class.active]="selectedCountry === country"
    (click)="selectCountry(country)">
  <span class="country-name">{{ country.name }}</span>
  <span class="more-options">â‹®</span>
</li>

      </ul>
    </div>

    <!-- Main Content -->
    <div class="main-details">
      <h3 class="section-title">{{ selectedCountry }}</h3>

      <div class="form-grid">
        <div class="form-group">
          <label>{{ t('cpa') }}</label>
          <input type="text" [(ngModel)]="cpaUrl" class="form-control">
        </div>
        <div class="form-group">
          <label>{{ t('zakat') }}</label>
          <input type="text" [(ngModel)]="zakatUrl" class="form-control">
        </div>
        <div class="form-group">
          <label>{{ t('ministryCommerce') }}</label>
          <input type="text" [(ngModel)]="commerceUrl" class="form-control">
        </div>
        <div class="form-group">
          <label>{{ t('taxis') }}</label>
          <input type="text" [(ngModel)]="taxisUrl" class="form-control">
        </div>
      </div>

      <!-- Cities Table -->
      <div class="table-section">
        <h4>{{ t('cities') }}</h4>
        <div class="custom-card">
          <table class="data-table">
            <thead>
              <tr>
                <th>{{ t('cityName') }} <span class="sort-arrow">â†“</span></th>
                <th>{{ t('regionsCount') }} <span class="sort-arrow">â†“</span></th>
                <th class="actions-col">{{ t('actions') }} <span class="sort-arrow">â†“</span></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let city of cities">
                <td class="fw-bold">{{ city.name }}</td>
                <td class="text-blue">{{ city.regionsCount }}</td>
                <td class="actions-cell">
                  <button class="btn-icon edit">âœŽ {{ t('edit') }}</button>
                  <button class="btn-icon delete">ðŸ—‘ {{ t('delete') }}</button>
                </td>
              </tr>
            </tbody>
          </table>

          <div class="card-footer-action" (click)="openCityModal()">
            {{ t('addCityBtn') }}
          </div>
        </div>
      </div>

      <!-- Regions Table -->
      <div class="table-section">
        <h4>{{ t('regions') }}</h4>
        <div class="custom-card">
          <table class="data-table">
            <thead>
              <tr>
                <th>{{ t('regionName') }} <span class="sort-arrow">â†“</span></th>
                <th>{{ t('city') }} <span class="sort-arrow">â†“</span></th>
                <th class="actions-col">{{ t('actions') }} <span class="sort-arrow">â†“</span></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let region of regions">
                <td class="fw-bold">{{ region.name }}</td>
                <td class="fw-bold">{{ region.cityName }}</td>
                <td class="actions-cell">
                  <button class="btn-icon edit">âœŽ {{ t('edit') }}</button>
                  <button class="btn-icon delete">ðŸ—‘ {{ t('delete') }}</button>
                </td>
              </tr>
            </tbody>
          </table>

          <div class="card-footer-action" (click)="openRegionModal()">
            {{ t('addRegionBtn') }}
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- === ADD COUNTRY MODAL === -->
  <div class="modal-overlay" *ngIf="isModalOpen">
    <div class="modal-container">

      <div class="modal-header">
        <div class="modal-titles">
          <h3>{{ t('modalAddCountry') }}</h3>
          <p>{{ t('modalAddCountryDesc') }}</p>
        </div>
        <button class="close-btn" (click)="closeModal()">Ã—</button>
      </div>

      <div class="modal-body">

        <div class="form-group full-width">
          <label>{{ t('addCountry') }}</label>
          <div class="select-wrapper">
            <select (change)="onCountryChange($event)" class="form-control">
  <option [value]="null">-- Select Country --</option>
  <option *ngFor="let country of countries" [value]="country | json">
    {{ country.flag }} {{ country.name }}
  </option>
</select>
            <span class="select-arrow">âŒ„</span>
          </div>
        </div>

        <div class="form-row">

          <div class="form-group">
            <label>{{ t('addCity') }}</label>
            <div class="select-wrapper">
              <select *ngIf="cities.length" (change)="onCityChange($event)" class="form-control">
  <option [value]="null">-- Select City --</option>
  <option *ngFor="let city of cities" [value]="city | json">
    {{ city.name }}
  </option>
</select>
              <span class="select-arrow">âŒ„</span>
            </div>
          </div>

          <div class="form-group">
            <label>{{ t('addRegion') }}</label>
            <div class="select-wrapper">
              <select *ngIf="states.length" (change)="onStateChange($event)" class="form-control">
  <option [value]="null">-- Select State --</option>
  <option *ngFor="let state of states" [value]="state | json">
    {{ state.name }}
  </option>
</select>
              <span class="select-arrow">âŒ„</span>
            </div>
          </div>

        </div>

        <div class="form-group full-width">
          <label>{{ t('cpaWebsite') }}</label>
          <input type="text" class="form-control" placeholder="{{ t('cpaWebsite') }}">
        </div>

        <div class="form-group full-width">
          <label>{{ t('commerceWebsite') }}</label>
          <input type="text" class="form-control" placeholder="{{ t('commerceWebsite') }}">
        </div>

        <div class="form-group full-width">
          <label>{{ t('taxWebsite') }}</label>
          <input type="text" class="form-control" placeholder="{{ t('taxWebsite') }}">
        </div>

      </div>

      <div class="modal-footer">
        <button class="btn-primary save-modal-btn" (click)="closeModal()">{{ t('saveCountry') }}</button>
      </div>

    </div>
  </div>

  <!-- === ADD CITY MODAL === -->
  <div class="modal-overlay" *ngIf="isCityModalOpen">
    <div class="modal-container">

      <div class="modal-header">
        <div class="modal-titles">
          <h3>{{ t('addCity') }}</h3>
        </div>
        <button class="close-btn" (click)="closeCityModal()">Ã—</button>
      </div>

      <div class="modal-body">
        <div class="form-group full-width">
          <label>{{ t('addCity') }}</label>
          <div class="select-wrapper">
            <select class="form-control">
              <option>{{ t('selectCity') }}</option>
              <option>Riyadh</option>
              <option>Jeddah</option>
              <option>Dammam</option>
            </select>
            <span class="select-arrow">âŒ„</span>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn-primary save-modal-btn" (click)="closeCityModal()">{{ t('saveCity') }}</button>
      </div>

    </div>
  </div>

  <!-- === ADD REGION MODAL === -->
  <div class="modal-overlay" *ngIf="isRegionModalOpen">
    <div class="modal-container">

      <div class="modal-header">
        <div class="modal-titles">
          <h3>{{ t('addRegion') }}</h3>
        </div>
        <button class="close-btn" (click)="closeRegionModal()">Ã—</button>
      </div>

      <div class="modal-body">
        <div class="form-group full-width">
          <label>{{ t('addRegion') }}</label>
          <div class="select-wrapper">
            <select class="form-control">
              <option>{{ t('selectRegion') }}</option>
              <option>Al Olaya</option>
              <option>Al Malqa</option>
              <option>Al Yasmin</option>
            </select>
            <span class="select-arrow">âŒ„</span>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn-primary save-modal-btn" (click)="closeRegionModal()">{{ t('saveRegion') }}</button>
      </div>

    </div>
  </div>

</div>
